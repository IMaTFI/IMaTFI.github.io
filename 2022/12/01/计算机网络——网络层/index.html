<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#37c6c0"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#37c6c0">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.15.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="4.1 网络层概述网络层的目标：主机到主机的通信。  如何选路？ 如何转发？（卸货&#x2F;装货） 确认是否可达？（获取路况）  网络层的主要功能：  选路：确定一条端到端的路径。 转发：根据分组的头部信息，将分组向适当的链路进行转发。 状态报告  网络层的服务：  虚电路服务：路径上的每个路由器维护连接信息。 数据报服务：没有连接建立、不同的保温可能走不同的路径。  4.2 路由器的工作原理路由器的结构">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络——网络层">
<meta property="og:url" content="http://example.com/2022/12/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="Kimmich&#39;s Blog">
<meta property="og:description" content="4.1 网络层概述网络层的目标：主机到主机的通信。  如何选路？ 如何转发？（卸货&#x2F;装货） 确认是否可达？（获取路况）  网络层的主要功能：  选路：确定一条端到端的路径。 转发：根据分组的头部信息，将分组向适当的链路进行转发。 状态报告  网络层的服务：  虚电路服务：路径上的每个路由器维护连接信息。 数据报服务：没有连接建立、不同的保温可能走不同的路径。  4.2 路由器的工作原理路由器的结构">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img-blog.csdnimg.cn/78549b42d7a64e1293968661219d3499.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/0f491cd6e9544019912d6228e8af0df3.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/cf23c93aedf74c61ba4845defc73d491.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/b9c63ca9d7974b5e806dc25f188ef46f.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/6985308e177b455ca93e65f8b62e7031.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/d6cb3a6e7957426fad87a8af9edfa927.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/5ff444bb43cc4df5af500c96941607eb.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/4cccb981c9b54f4d9610173314cc03e1.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/ce3326ca843f40b7965fe43d55e46c17.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/42864259f0a248d3b172f61efe84bfca.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/73c3dafc37564136a77d4ae972223115.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/62ab152274874401a07d4fe59bc21136.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/da724a42ffb04354897737d055d0f3ae.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/ac708f5cfe12498b892dad10603f130c.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/1590129f1b324ff1954e123d3fd7a1f8.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/deead68b4ada44899411f42b62304815.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/af55cd0adc104b6aa6c19ab29d52996d.jpeg">
<meta property="og:image" content="https://img-blog.csdnimg.cn/837a976aaccc4d33990836e4b493afb1.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/5aa00174ead9475a8b6e1824fecc0070.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/6956a021e9ed44ffa71fb440d76cef1a.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/213a0b70fc444f5c8ec422040c392ec2.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/844244874fb946acb90649124cdfef04.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/9c6cbfad9b8f4d2f95e8526b77ec87b7.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/a00aca4641064f44b8411a36be3e9823.png">
<meta property="article:published_time" content="2022-12-01T07:43:44.000Z">
<meta property="article:modified_time" content="2022-12-01T07:45:03.549Z">
<meta property="article:author" content="Kimmich">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img-blog.csdnimg.cn/78549b42d7a64e1293968661219d3499.png">


<link rel="canonical" href="http://example.com/2022/12/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%BD%91%E7%BB%9C%E5%B1%82/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2022/12/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%BD%91%E7%BB%9C%E5%B1%82/","path":"2022/12/01/计算机网络——网络层/","title":"计算机网络——网络层"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>计算机网络——网络层 | Kimmich's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Kimmich's Blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="nav-text">4.1 网络层概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-2-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">4.2 路由器的工作原理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-3-IP%E5%8D%8F%E8%AE%AE%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="nav-text">4.3 IP协议数据报格式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-4-IP%E5%9C%B0%E5%9D%80"><span class="nav-text">4.4 IP地址</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-5-%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="nav-text">4.5 子网划分</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-6-CIDR"><span class="nav-text">4.6 CIDR</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-7-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT"><span class="nav-text">4.7 网络地址转换NAT</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-8-ICMP%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.8 ICMP协议</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-9-DHCP%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.9 DHCP协议</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-10-%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0"><span class="nav-text">4.10 路由协议概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-11-RIP%E5%8D%8F%E8%AE%AE%E4%B8%8E%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E7%AE%97%E6%B3%95"><span class="nav-text">4.11 RIP协议与距离向量算法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-12-OSPF%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.12 OSPF协议</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-12-BGP-4%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.12 BGP-4协议</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Kimmich</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">105</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/12/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E7%BD%91%E7%BB%9C%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Kimmich">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kimmich's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="计算机网络——网络层 | Kimmich's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络——网络层
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2022-12-01 15:43:44 / Modified: 15:45:03" itemprop="dateCreated datePublished" datetime="2022-12-01T15:43:44+08:00">2022-12-01</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="4-1-网络层概述"><a href="#4-1-网络层概述" class="headerlink" title="4.1 网络层概述"></a>4.1 网络层概述</h1><p>网络层的目标：主机到主机的通信。</p>
<ul>
<li>如何选路？</li>
<li>如何转发？（卸货/装货）</li>
<li>确认是否可达？（获取路况）</li>
</ul>
<p>网络层的主要功能：</p>
<ul>
<li>选路：确定一条端到端的路径。</li>
<li>转发：根据分组的头部信息，将分组向适当的链路进行转发。</li>
<li>状态报告</li>
</ul>
<p>网络层的服务：</p>
<ul>
<li>虚电路服务：路径上的每个路由器维护连接信息。</li>
<li>数据报服务：没有连接建立、不同的保温可能走不同的路径。</li>
</ul>
<h1 id="4-2-路由器的工作原理"><a href="#4-2-路由器的工作原理" class="headerlink" title="4.2 路由器的工作原理"></a>4.2 路由器的工作原理</h1><p>路由器的结构：<br><img src="https://img-blog.csdnimg.cn/78549b42d7a64e1293968661219d3499.png" alt="在这里插入图片描述"><br>路由器的主要功能：路由选择、分组转发。</p>
<p>输入端口</p>
<p>路由器交换结构：</p>
<ul>
<li>内存交换：先将分组拷贝到内存中，再由CPU控制转发至输出端口。速度受限于内存带宽。</li>
<li>总线交换：速度受限于总线带宽。</li>
<li>内联网络</li>
</ul>
<p>输出端口：</p>
<ul>
<li>对于有N条TCP连接经过的链路而言，缓存区的大小 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -1.334ex;" xmlns="http://www.w3.org/2000/svg" width="11.655ex" height="3.318ex" role="img" focusable="false" viewBox="0 -877 5151.7 1466.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mfrac" transform="translate(2092.6,0)"><g data-mml-node="mrow" transform="translate(220,394) scale(0.707)"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g><g data-mml-node="mi" transform="translate(759,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mi" transform="translate(1463,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></g><g data-mml-node="mo" transform="translate(2167,0)"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"></path></g><g data-mml-node="mi" transform="translate(2945,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path></g></g><g data-mml-node="msqrt" transform="translate(1015.8,-436.1) scale(0.707)"><g transform="translate(853,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g></g><g data-mml-node="mo" transform="translate(0,-34.6)"><path data-c="221A" d="M95 178Q89 178 81 186T72 200T103 230T169 280T207 309Q209 311 212 311H213Q219 311 227 294T281 177Q300 134 312 108L397 -77Q398 -77 501 136T707 565T814 786Q820 800 834 800Q841 800 846 794T853 782V776L620 293L385 -193Q381 -200 366 -200Q357 -200 354 -197Q352 -195 256 15L160 225L144 214Q129 202 113 190T95 178Z"></path></g><rect width="600" height="42.4" x="853" y="723"></rect></g><rect width="2819.1" height="60" x="120" y="220"></rect></g></g></g></svg></mjx-container>。</li>
<li>丢弃策略：<ul>
<li>被动队列管理（溢出后才进行处理）：弃尾、删除一个或多个已排队分组。</li>
<li>随机早期检测RED</li>
</ul>
</li>
</ul>
<h1 id="4-3-IP协议数据报格式"><a href="#4-3-IP协议数据报格式" class="headerlink" title="4.3 IP协议数据报格式"></a>4.3 IP协议数据报格式</h1><p> <img src="https://img-blog.csdnimg.cn/0f491cd6e9544019912d6228e8af0df3.png" alt="在这里插入图片描述"></p>
<ul>
<li>版本：IPv4、IPv等。</li>
<li>生存时间：生存时间反映了源目的主机之间数据报经历的跳数，每经过一个节点，跳数减一。</li>
<li>报头校验和：只只检验首部。</li>
<li>源地址、目的地址：32位IP地址。</li>
<li>首部长度、总长度：以4字节为单位。</li>
</ul>
<p>当数据报总长度超过链路层MTU时，需要对数据报进行切片：</p>
<ul>
<li>标识：同一个数据报的不同切片具有相同的标识。</li>
<li>标志：3bit。第1位保留；第2位表示能否分片；第3位表示是否未结束（1代表未结束）。</li>
<li>片偏移：以8字节为单位。<br><img src="https://img-blog.csdnimg.cn/cf23c93aedf74c61ba4845defc73d491.png" alt="在这里插入图片描述"></li>
</ul>
<h1 id="4-4-IP地址"><a href="#4-4-IP地址" class="headerlink" title="4.4 IP地址"></a>4.4 IP地址</h1><p>IP地址 = 网络号 + 主机号</p>
<p>IP地址的分类：<br><img src="https://img-blog.csdnimg.cn/b9c63ca9d7974b5e806dc25f188ef46f.png" alt="在这里插入图片描述"></p>
<p>同一局域网内的主机或路由器的IP地址中的网络号必须相同。</p>
<h1 id="4-5-子网划分"><a href="#4-5-子网划分" class="headerlink" title="4.5 子网划分"></a>4.5 子网划分</h1><p>从主机号总借用一部分作为子网号。<br>IP地址 = 网络号 + 子网号 + 主机号</p>
<h1 id="4-6-CIDR"><a href="#4-6-CIDR" class="headerlink" title="4.6 CIDR"></a>4.6 CIDR</h1><p><img src="https://img-blog.csdnimg.cn/6985308e177b455ca93e65f8b62e7031.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/d6cb3a6e7957426fad87a8af9edfa927.png" alt="在这里插入图片描述"></p>
<p>匹配原则：</p>
<ul>
<li>将IP地址与路由表中每一项的网络前缀相比较，找出所有相同的表项。</li>
<li>在所有相同的表项中选择匹配长度最长的。</li>
</ul>
<h1 id="4-7-网络地址转换NAT"><a href="#4-7-网络地址转换NAT" class="headerlink" title="4.7 网络地址转换NAT"></a>4.7 网络地址转换NAT</h1><p> NAT的实现原理：<br><img src="https://img-blog.csdnimg.cn/5ff444bb43cc4df5af500c96941607eb.png" alt="在这里插入图片描述"></p>
<p>NAT带来的变化：<br><img src="https://img-blog.csdnimg.cn/4cccb981c9b54f4d9610173314cc03e1.png" alt="在这里插入图片描述"></p>
<h1 id="4-8-ICMP协议"><a href="#4-8-ICMP协议" class="headerlink" title="4.8 ICMP协议"></a>4.8 ICMP协议</h1><p>为什么需要ICMP协议？对底层的网络状态进行监测、控制和分析。</p>
<p>ICMP报文的格式：<br><img src="https://img-blog.csdnimg.cn/ce3326ca843f40b7965fe43d55e46c17.png" alt="在这里插入图片描述"></p>
<p>信息报文不可达：<br><img src="https://img-blog.csdnimg.cn/42864259f0a248d3b172f61efe84bfca.png" alt="在这里插入图片描述"></p>
<p>参数出错报文：<br><img src="https://img-blog.csdnimg.cn/73c3dafc37564136a77d4ae972223115.png" alt="在这里插入图片描述"></p>
<p>重定向报文：<br><img src="https://img-blog.csdnimg.cn/62ab152274874401a07d4fe59bc21136.png" alt="在这里插入图片描述"></p>
<p>ICMP的应用：</p>
<ul>
<li>ping：确定是否可达</li>
<li>tracert：确定路径上的确切路由</li>
</ul>
<h1 id="4-9-DHCP协议"><a href="#4-9-DHCP协议" class="headerlink" title="4.9 DHCP协议"></a>4.9 DHCP协议</h1><p>动态主机配置协议DHCP是<strong>应用层</strong>协议，使用<strong>客户/服务器</strong>方式，客户端和服务器端通过<strong>广播</strong>方式进行交互，基于<strong>UDP</strong>。</p>
<p>DHCP提供即插即用的联网机制，主机可以从服务器动态获取IP地址、子网掩码等信息，允许地址重用，支持在用地址续租。</p>
<p><img src="https://img-blog.csdnimg.cn/da724a42ffb04354897737d055d0f3ae.png" alt="在这里插入图片描述"></p>
<h1 id="4-10-路由协议概述"><a href="#4-10-路由协议概述" class="headerlink" title="4.10 路由协议概述"></a>4.10 路由协议概述</h1><p>层次路由：将路由网络划分为若干自治域（AS）。</p>
<p> <img src="https://img-blog.csdnimg.cn/ac708f5cfe12498b892dad10603f130c.png" alt="在这里插入图片描述"></p>
<h1 id="4-11-RIP协议与距离向量算法"><a href="#4-11-RIP协议与距离向量算法" class="headerlink" title="4.11 RIP协议与距离向量算法"></a>4.11 RIP协议与距离向量算法</h1><p><img src="https://img-blog.csdnimg.cn/1590129f1b324ff1954e123d3fd7a1f8.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>所谓距离，可以理解为需要经过几个路由器。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/deead68b4ada44899411f42b62304815.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/af55cd0adc104b6aa6c19ab29d52996d.jpeg" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/837a976aaccc4d33990836e4b493afb1.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/5aa00174ead9475a8b6e1824fecc0070.png" alt="在这里插入图片描述"></p>
<p>RIP是应用层协议，使用UDP传送数据，一个RIP报文最多包含25个路由表项。</p>
<p>RIP协议好消息传得快，坏消息传得慢：</p>
<p><img src="https://img-blog.csdnimg.cn/6956a021e9ed44ffa71fb440d76cef1a.png" alt="在这里插入图片描述">  </p>
<blockquote>
<p>再上图的情况中，如果R1得知网1出现故障，但是又接到了来自R2的消息，则R1会根据R2提供的表项更新自己的表项。两个路由器如此往复，知道最后才发现网1是不可达的。所以说“坏消息”传得慢。</p>
</blockquote>
<h1 id="4-12-OSPF协议"><a href="#4-12-OSPF协议" class="headerlink" title="4.12 OSPF协议"></a>4.12 OSPF协议</h1><ul>
<li><p>所有路由器都知道整个网络拓扑图以及链路的费用信</p>
<ul>
<li><p>迪克斯特拉算法<br><img src="https://img-blog.csdnimg.cn/213a0b70fc444f5c8ec422040c392ec2.png" alt="在这里插入图片描述"></p>
</li>
<li><p>向本自治系统中所有路由器发送信息，使用的方法是洪泛法</p>
</li>
<li>发送的信息就是与本路由器相邻的所有路由器的链路状态</li>
<li>只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息,过了30分钟,就算没有发生变化,也要广播状态</li>
<li>所有路由器会构建一个链路状态数据库,这个数据库就是全网络的拓扑结构图</li>
</ul>
</li>
</ul>
<p>若采用流量作为链路成本的度量，则可能产生震荡。</p>
<h1 id="4-12-BGP-4协议"><a href="#4-12-BGP-4协议" class="headerlink" title="4.12 BGP-4协议"></a>4.12 BGP-4协议</h1><p><img src="https://img-blog.csdnimg.cn/844244874fb946acb90649124cdfef04.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/9c6cbfad9b8f4d2f95e8526b77ec87b7.png" alt="在这里插入图片描述"></p>
<p>BGP是应用层协议，借助TCP传送。<br><img src="https://img-blog.csdnimg.cn/a00aca4641064f44b8411a36be3e9823.png" alt="在这里插入图片描述"></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag"># 计算机网络</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/11/29/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0/" rel="prev" title="计算机网络——计算机网络和因特网概述">
                  <i class="fa fa-chevron-left"></i> 计算机网络——计算机网络和因特网概述
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/12/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E5%B1%80%E5%9F%9F%E7%BD%91/" rel="next" title="计算机网络——局域网">
                  计算机网络——局域网 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kimmich</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","cdn":"//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML"}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
